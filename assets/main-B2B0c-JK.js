(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function g(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(r){if(r.ep)return;r.ep=!0;const c=g(r);fetch(r.href,c)}})();document.addEventListener("DOMContentLoaded",()=>{const v=document.getElementById("navbar");if(v){const t=()=>{v.classList.toggle("scrolled",window.scrollY>50)};window.addEventListener("scroll",t,{passive:!0}),t()}const m=document.getElementById("theme-toggle");m&&(m.addEventListener("click",()=>{const e=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";m.classList.add("theme-toggle--switching"),setTimeout(()=>m.classList.remove("theme-toggle--switching"),400),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{localStorage.getItem("theme")||document.documentElement.setAttribute("data-theme",t.matches?"dark":"light")}));const g=document.getElementById("hamburger"),u=document.getElementById("nav-links");g&&u&&(g.addEventListener("click",()=>{g.classList.toggle("open"),u.classList.toggle("open")}),u.querySelectorAll("a").forEach(t=>{t.addEventListener("click",()=>{g.classList.remove("open"),u.classList.remove("open")})}),document.addEventListener("click",t=>{!g.contains(t.target)&&!u.contains(t.target)&&(g.classList.remove("open"),u.classList.remove("open"))}));const r=document.querySelectorAll(".reveal");if(r.length>0){const t=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting&&(n.target.classList.add("visible"),t.unobserve(n.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});r.forEach(e=>t.observe(e))}const c=document.querySelectorAll("section[id]");if(c.length>0){const t=new IntersectionObserver(e=>{e.forEach(n=>{if(n.isIntersecting){const o=n.target.getAttribute("id");document.querySelectorAll(".navbar__links a").forEach(s=>{s.classList.toggle("active",s.getAttribute("href")===`#${o}`)})}})},{threshold:.3});c.forEach(e=>t.observe(e))}document.querySelectorAll(".recipe-card").forEach(t=>{t.addEventListener("mousemove",e=>{const n=t.getBoundingClientRect(),o=(e.clientX-n.left)/n.width-.5,s=(e.clientY-n.top)/n.height-.5;t.style.transform=`translateY(-8px) perspective(800px) rotateY(${o*6}deg) rotateX(${-s*6}deg)`}),t.addEventListener("mouseleave",()=>{t.style.transform=""})});const h=document.getElementById("filter-bar");let E="tutti";if(h){const t=h.querySelectorAll(".filter-chip"),e=document.querySelectorAll(".recipe-card"),n=o=>{E=o,t.forEach(s=>{s.classList.toggle("active",s.dataset.filter===o)}),e.forEach(s=>{const f=s.dataset.category||"",d=o==="tutti"||f===o;s.classList.toggle("recipe-card--filtered",!d)})};t.forEach(o=>{o.addEventListener("click",()=>n(o.dataset.filter))})}const i=document.getElementById("search-input");if(i){const t=document.querySelectorAll(".recipe-card");i.addEventListener("input",()=>{const e=i.value.toLowerCase().trim();t.forEach(n=>{if(!e){n.classList.remove("recipe-card--hidden");return}const s=n.textContent.toLowerCase().includes(e),f=n.dataset.category||"",d=E==="tutti"||f===E;n.classList.toggle("recipe-card--hidden",!s||!d)})}),document.addEventListener("keydown",e=>{e.key==="/"&&document.activeElement!==i&&(e.preventDefault(),i.focus(),i.scrollIntoView({behavior:"smooth",block:"center"})),e.key==="Escape"&&document.activeElement===i&&(i.value="",i.dispatchEvent(new Event("input")),i.blur())})}const L=document.getElementById("current-year");L&&(L.textContent=new Date().getFullYear());const y=document.getElementById("setup-badge");if(y){const t=document.getElementById("hero-setup-tag"),e=document.getElementById("setup-badge-value"),n=document.querySelectorAll(".recipe-panel[data-setup]"),o=[{id:"spirale",icon:"ðŸ”§",label:"Impastatrice a spirale"},{id:"mano",icon:"ðŸ¤²",label:"A mano"}];let s=0;const f=a=>{s=a;const p=o[a];n.forEach(x=>{x.style.display=x.getAttribute("data-setup")===p.id?"":"none"}),t&&(t.textContent=`${p.icon} ${p.label}`),e&&(e.textContent=`Â ${p.label}`),localStorage.setItem("recipe-setup",p.id)};y.addEventListener("click",()=>{f((s+1)%o.length)}),y.addEventListener("keydown",a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),f((s+1)%o.length))});const d=localStorage.getItem("recipe-setup");if(d){const a=o.findIndex(p=>p.id===d);a!==-1&&f(a)}}const l=document.getElementById("dose-input"),b=document.getElementById("dose-badge"),I=document.getElementById("dose-decrease"),w=document.getElementById("dose-increase");if(l&&b){const t=document.querySelectorAll(".ingredient-qty[data-base]"),e=()=>{const o=parseFloat(l.value)||1;b.textContent=o===1?"Ã—1":`Ã—${o%1===0?o:o.toFixed(1)}`,t.forEach(s=>{const d=parseFloat(s.getAttribute("data-base"))*o,a=d>=10?`${Math.round(d)}g`:`${Math.round(d*10)/10}g`;s.textContent=a,s.classList.remove("dose-updated"),s.offsetWidth,s.classList.add("dose-updated")})};l.addEventListener("input",e),l.addEventListener("change",e),I&&I.addEventListener("click",()=>{const n=parseFloat(l.value)||1,o=parseFloat(l.min)||.5;n>o&&(l.value=(n-.5).toFixed(1),e())}),w&&w.addEventListener("click",()=>{const n=parseFloat(l.value)||1,o=parseFloat(l.max)||5;n<o&&(l.value=(n+.5).toFixed(1),e())})}"startViewTransition"in document&&document.querySelectorAll("a[href]").forEach(t=>{const e=t.getAttribute("href");e&&e.endsWith(".html")&&!e.startsWith("http")&&t.addEventListener("click",n=>{n.preventDefault(),document.startViewTransition(()=>{window.location.href=e})})})});
