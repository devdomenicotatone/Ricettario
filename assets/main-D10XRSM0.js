(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))m(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&m(h)}).observe(document,{childList:!0,subtree:!0});function f(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function m(r){if(r.ep)return;r.ep=!0;const c=f(r);fetch(r.href,c)}})();document.addEventListener("DOMContentLoaded",()=>{const y=document.getElementById("navbar");if(y){const t=()=>{y.classList.toggle("scrolled",window.scrollY>50)};window.addEventListener("scroll",t,{passive:!0}),t()}const g=document.getElementById("theme-toggle");g&&(g.addEventListener("click",()=>{const e=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";g.classList.add("theme-toggle--switching"),setTimeout(()=>g.classList.remove("theme-toggle--switching"),400),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>{localStorage.getItem("theme")||document.documentElement.setAttribute("data-theme",t.matches?"dark":"light")}));const f=document.getElementById("hamburger"),m=document.getElementById("nav-links");f&&m&&(f.addEventListener("click",()=>{f.classList.toggle("open"),m.classList.toggle("open")}),m.querySelectorAll("a").forEach(t=>{t.addEventListener("click",()=>{f.classList.remove("open"),m.classList.remove("open")})}),document.addEventListener("click",t=>{!f.contains(t.target)&&!m.contains(t.target)&&(f.classList.remove("open"),m.classList.remove("open"))}));const r=document.querySelectorAll(".reveal");if(r.length>0){const t=new IntersectionObserver(e=>{e.forEach(n=>{n.isIntersecting&&(n.target.classList.add("visible"),t.unobserve(n.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});r.forEach(e=>t.observe(e))}const c=document.querySelectorAll("section[id]");if(c.length>0){const t=new IntersectionObserver(e=>{e.forEach(n=>{if(n.isIntersecting){const s=n.target.getAttribute("id");document.querySelectorAll(".navbar__links a").forEach(o=>{o.classList.toggle("active",o.getAttribute("href")===`#${s}`)})}})},{threshold:.3});c.forEach(e=>t.observe(e))}document.querySelectorAll(".recipe-card").forEach(t=>{t.addEventListener("mousemove",e=>{const n=t.getBoundingClientRect(),s=(e.clientX-n.left)/n.width-.5,o=(e.clientY-n.top)/n.height-.5;t.style.transform=`translateY(-8px) perspective(800px) rotateY(${s*6}deg) rotateX(${-o*6}deg)`}),t.addEventListener("mouseleave",()=>{t.style.transform=""})});const h=document.getElementById("filter-bar");let b="tutti";if(h){const t=h.querySelectorAll(".filter-chip"),e=document.querySelectorAll(".recipe-card"),n=s=>{b=s,t.forEach(o=>{o.classList.toggle("active",o.dataset.filter===s)}),e.forEach(o=>{const p=o.dataset.category||"",a=s==="tutti"||p===s;o.classList.toggle("recipe-card--filtered",!a)})};t.forEach(s=>{s.addEventListener("click",()=>n(s.dataset.filter))})}const d=document.getElementById("search-input");if(d){const t=document.querySelectorAll(".recipe-card");d.addEventListener("input",()=>{const e=d.value.toLowerCase().trim();t.forEach(n=>{if(!e){n.classList.remove("recipe-card--hidden");return}const o=n.textContent.toLowerCase().includes(e),p=n.dataset.category||"",a=b==="tutti"||p===b;n.classList.toggle("recipe-card--hidden",!o||!a)})}),document.addEventListener("keydown",e=>{e.key==="/"&&document.activeElement!==d&&(e.preventDefault(),d.focus(),d.scrollIntoView({behavior:"smooth",block:"center"})),e.key==="Escape"&&document.activeElement===d&&(d.value="",d.dispatchEvent(new Event("input")),d.blur())})}const L=document.getElementById("current-year");L&&(L.textContent=new Date().getFullYear());const v=document.getElementById("setup-badge");if(v){const t=document.getElementById("hero-setup-tag"),e=document.getElementById("setup-badge-value"),n=document.querySelectorAll(".recipe-panel[data-setup]"),s={spirale:{icon:"ðŸ”§",label:"Impastatrice a spirale"},estrusore:{icon:"ðŸ”§",label:"Estrusore con trafila"},mano:{icon:"ðŸ¤²",label:"A mano"}},o=[];n.forEach(i=>{const l=i.getAttribute("data-setup");s[l]&&o.push({id:l,...s[l]})}),o.length<=1&&(v.style.cursor="default",v.removeAttribute("role"),v.removeAttribute("tabindex"));let p=0;const a=i=>{p=i;const l=o[i];n.forEach(A=>{A.style.display=A.getAttribute("data-setup")===l.id?"":"none"}),t&&(t.textContent=`${l.icon} ${l.label}`),e&&(e.textContent=`Â ${l.label}`),localStorage.setItem("recipe-setup",l.id)};o.length>1&&(v.addEventListener("click",()=>{a((p+1)%o.length)}),v.addEventListener("keydown",i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),a((p+1)%o.length))}));const E=localStorage.getItem("recipe-setup");if(E){const i=o.findIndex(l=>l.id===E);i!==-1&&a(i)}}const u=document.getElementById("dose-input"),I=document.getElementById("dose-badge"),w=document.getElementById("dose-decrease"),x=document.getElementById("dose-increase");if(u&&I){const t=document.querySelectorAll(".ingredient-qty[data-base]"),e=()=>{const s=parseFloat(u.value)||1;I.textContent=s===1?"Ã—1":`Ã—${s%1===0?s:s.toFixed(1)}`,t.forEach(o=>{const a=parseFloat(o.getAttribute("data-base"))*s,E=a>=10?`${Math.round(a)}g`:`${Math.round(a*10)/10}g`;o.textContent=E,o.classList.remove("dose-updated"),o.offsetWidth,o.classList.add("dose-updated")})};u.addEventListener("input",e),u.addEventListener("change",e),w&&w.addEventListener("click",()=>{const n=parseFloat(u.value)||1,s=parseFloat(u.min)||.5;n>s&&(u.value=(n-.5).toFixed(1),e())}),x&&x.addEventListener("click",()=>{const n=parseFloat(u.value)||1,s=parseFloat(u.max)||5;n<s&&(u.value=(n+.5).toFixed(1),e())})}"startViewTransition"in document&&document.querySelectorAll("a[href]").forEach(t=>{const e=t.getAttribute("href");e&&e.endsWith(".html")&&!e.startsWith("http")&&t.addEventListener("click",n=>{n.preventDefault(),document.startViewTransition(()=>{window.location.href=e})})})});
